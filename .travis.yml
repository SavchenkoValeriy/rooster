sudo: required

language: cpp

matrix:
  include:
    - os: linux
      dist: xenial
      compiler: clang
      addons:
        apt:
          sources:
            - george-edison55/cmake-3.x
            - ubuntu-toolchain-r-test
          packages:
            - g++-6
            - clang-3.8
            - libboost-dev
            - cmake
            - libstdc++6

cache:
  apt: true
  directories:
    - $HOME/deps

before_script:
  - source ./scripts/travis/defaults.sh
  - export CC=gcc-6
  - export CXX=g++-6
  - DEP_DIR="$HOME/deps"
  - source ./scripts/travis/install-deps.sh
  - export PATH
  - export CLANG_DIR
  - export CLANG_BIN
  - export CLANGXX_BIN
  - ./scripts/travis/configure.sh

script:
  - ./scripts/travis/build.sh
  - ./scripts/travis/test.sh

email:
  on_success: change
  on_failure: always
